<!DOCTYPE html>
<html>
<head>
    <title>CometChat Admin Page</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script defer src="https://widget-js.cometchat.io/v3/cometchatwidget.js"></script>
</head>
<body style="margin: 0; height: 100vh; display: flex; justify-content: center; align-items: center; background: #f0f0f0;">

    <div id="cometchat" style="width: 100%; height: 100vh;"></div>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            
            // 1. Configuration
            // Your exact App ID and Region
            const appID = "16690658bf8acd328";
            const region = "eu";
            const authKey = "0a2c73baa5e4a8bb0858f4e97963328839e97436";
            
            // 2. Settings
            const appSettings = {
                "appID": appID,
                "appRegion": region,
                "authKey": authKey
            };

            const widgetSettings = {
                "target": "#cometchat", 
                "width": "100%",
                "height": "100%",
                "defaultID": "rossmackenzie", // Ensure this user exists!
                "defaultType": "user",
                "docked": "false", 
                "alignment": "left",
                "roundedCorners": "true",
                "height": "100%", 
                "width": "100%"
            };

            // 3. Launch
            // We use a simple interval to wait for the script to be ready
            let checkLoaded = setInterval(function() {
                if(window.CometChatWidget) {
                    console.log("CometChatWidget found!");
                    clearInterval(checkLoaded);

                    CometChatWidget.init(appSettings).then(response => {
                        console.log("Initialization completed successfully");
                        
                        // Launch the widget
                        CometChatWidget.launch(widgetSettings).then(response => {
                            console.log("CometChatWidget launched successfully");
                        }, error => {
                            console.log("CometChatWidget launch failed with error:", error);
                        });

                    }, error => {
                        console.log("Initialization failed with error:", error);
                    });
                }
            }, 100);
        });
    </script>
</body>
</html>