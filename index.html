<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CometChat Embed | Ross</title>
    <script defer src="https://widget-js.cometchat.io/v3/cometchatwidget.js"></script>
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #ffffff; }
        #cometchat { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="cometchat"></div>

    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            const appID = "16690658bf8acd328";
            const region = "eu";
            const authKey = "a63927e130c6bb02ece83c14d3909128a7a632f8";
            const uid = "rossmackenzie"; 
            
            // Your Dashboard ID
            const myID = "68cd1384b8e2941a954dc962"; 

            let checkLoaded = setInterval(function() {
                if(window.CometChatWidget) {
                    clearInterval(checkLoaded);
                    
                    CometChatWidget.init({
                        "appID": appID,
                        "appRegion": region,
                        "authKey": authKey
                    }).then(response => {
                        CometChatWidget.login({ "uid": uid }).then(user => {
                            
                            // We pass the ID as both widgetID and variantID to ensure the settings are found
                            CometChatWidget.launch({
                                "widgetID": myID, 
                                "variantID": myID,
                                "target": "#cometchat",
                                "docked": "false",
                                "height": "100%",
                                "width": "100%",
                                "roundedCorners": "true"
                            }).then(response => {
                                console.log("Success! Chat is live.");
                            }).catch(err => {
                                console.error("Launch error:", err);
                            });

                        }).catch(error => { console.error("Login failed:", error); });
                    }).catch(error => { console.error("Init failed:", error); });
                }
            }, 100);
        });
    </script>
</body>
</html>